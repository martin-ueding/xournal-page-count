#!/bin/bash
# Copyright (c) 2012 Martin Ueding <dev@martin-ueding.de>

# Counts the number of pages in the given Xournal documents.

set -e
set -u

# Cost of one sheet of paper, measured in €.
cost_per_page=0.01

# Height per page, measured in meters.
height_per_page=0.0001

sum=0

for file in "$@"
do
	pages="$(gunzip -c "$file" | grep '<page' | wc -l)"
	sum=$((sum + pages))
	echo "$file has $pages"
done

height=$(python -c "print $height_per_page * $sum")
cost=$(python -c "print $cost_per_page * $sum")

echo

echo "Total:"
echo "    $sum pages."
echo "    $height meters."
echo "    $cost €."
